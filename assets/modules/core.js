let planoAtual=localStorage.getItem("agro_plano")||"Free",fazendaAtual=localStorage.getItem("agro_fazenda_filtro")||null,userSession=null,userProfile=null,trialInfo=null,userRole=localStorage.getItem("agro_role")||"admin";const PLAN_BLOCKED_PAGES={Free:["colheitas","manutencao","clima","relatorios","centralgestao","copilot","combustivel","aplicacoes","insumos","estoque","equipe","maquinas","insumosbase","config","folhasalarial","analisesolo"],Pro:[],Master:[],Trial:[]},PLAN_LIMITS={Free:{fazendas:1,talhoes:1,maquinas:0,funcionarios:0,admins:1},Pro:{fazendas:5,talhoes:9999,maquinas:9999,funcionarios:15,admins:3},Master:{fazendas:9999,talhoes:9999,maquinas:9999,funcionarios:9999,admins:9999},Trial:{fazendas:1,talhoes:1,maquinas:0,funcionarios:0,admins:1}};function getPlanLimits(){const e=localStorage.getItem("agro_plano")||planoAtual||"Free";return PLAN_LIMITS[e]||PLAN_LIMITS.Free}function getPlanBlockedPages(){const e=localStorage.getItem("agro_plano")||planoAtual||"Free";return PLAN_BLOCKED_PAGES[e]||PLAN_BLOCKED_PAGES.Free}const ROLE_PERMISSIONS={admin:{pages:["dashboard","copilot","centralgestao","propriedade","insumos","insumosbase","aplicacoes","combustivel","clima","colheitas","manutencao","equipe","folhasalarial","analisesolo","maquinas","relatorios","config","ajuda"],canCreate:!0,canDelete:!0,canSeeFinanceiro:!0,label:"Administrador"},gerente:{pages:["dashboard","copilot","centralgestao","propriedade","insumos","insumosbase","aplicacoes","combustivel","clima","colheitas","manutencao","equipe","analisesolo","maquinas","relatorios","ajuda"],canCreate:!0,canDelete:!1,canSeeFinanceiro:!1,label:"Gerente"},funcionario:{pages:["dashboard","propriedade","aplicacoes","combustivel","clima","colheitas","manutencao","maquinas","ajuda"],canCreate:!1,canDelete:!1,canSeeFinanceiro:!1,label:"Funcion√°rio",pagePerms:{dashboard:{view:!0,create:!1,delete:!1,simplified:!0},propriedade:{view:!0,create:!1,delete:!1},aplicacoes:{view:!0,create:!0,delete:!1},combustivel:{view:!0,create:!0,delete:!1},clima:{view:!0,create:!1,delete:!1},colheitas:{view:!0,create:!1,delete:!1},manutencao:{view:!0,create:!0,delete:!1},maquinas:{view:!0,create:!1,delete:!1},ajuda:{view:!0,create:!1,delete:!1}}}};function getUserRole(){return userRole||"admin"}function getRolePerms(){const e=getUserRole();return ROLE_PERMISSIONS[e]||ROLE_PERMISSIONS.funcionario}function canAccessPage(e){return!!getRolePerms().pages.includes(e)&&!getPlanBlockedPages().includes(e)}function canCreateOnPage(e){const a=getUserRole();if("admin"===a)return!0;if("gerente"===a)return!0;if("funcionario"===a){const a=ROLE_PERMISSIONS.funcionario.pagePerms[e];return!!a&&a.create}return!0}function canDeleteOnPage(e){const a=getUserRole();if("admin"===a)return!0;if("gerente"===a)return!0;if("funcionario"===a){const a=ROLE_PERMISSIONS.funcionario.pagePerms[e];return!!a&&a.delete}return!0}function canSeeFinanceiro(){return getRolePerms().canSeeFinanceiro}function isSimplifiedDashboard(){return"funcionario"===getUserRole()}function getRoleBadgeColor(){const e=getUserRole();return"admin"===e?"background: #dcfce7; color: #166534;":"gerente"===e?"background: #dbeafe; color: #1e40af;":"background: #fef3c7; color: #92400e;"}function getRoleLabel(){return getRolePerms().label}function getTrialInfo(){return null}function iniciarTrial(e,a){localStorage.setItem("agro_plano","Free"),planoAtual="Free"}function isTrialExpirado(){return!1}function getPlanoEfetivo(){return localStorage.getItem("agro_plano")||"Free"}function renderTrialBanner(){return"Free"===planoAtual||"Trial"===planoAtual?'\n      <div class="free-banner">\n        üîí <strong>Plano Free</strong> ‚Äî apenas visualiza√ß√£o, 1 fazenda, 1 talh√£o.\n        <button onclick="pageUpgrade()" class="btn" style="padding:4px 12px; font-size:11.5px; background:var(--warning); color:#fff; border:none; box-shadow:none;">Ver Planos</button>\n      </div>\n    ':""}if(void 0===cloudSync){function cloudSync(){}}if(void 0===cloudRestore){async function cloudRestore(){return!1}}function pageTrialExpirado(){pageUpgrade()}function pageUpgrade(){const e=document.getElementById("app"),a=document.getElementById("content"),o=`\n    <div style="min-height:${a?"80vh":"100vh"}; background:${a?"#f8fafc":"linear-gradient(135deg,#0f172a,#1e293b)"}; display:flex; align-items:center; justify-content:center; padding:20px;">\n      <div style="max-width:720px; width:100%; background:white; border-radius:16px; padding:36px 32px; text-align:center; box-shadow:0 20px 60px rgba(0,0,0,.25);">\n        <div style="font-size:48px; margin-bottom:10px;">üåæ</div>\n        <h1 style="color:#1e293b; margin-bottom:6px; font-size:24px; font-weight:800;">Agro Pro ‚Äî Escolha seu Plano</h1>\n        <p style="color:#64748b; font-size:14px; line-height:1.6; margin-bottom:28px;">\n          O plano <b>Free</b> permite apenas visualizar dados existentes.<br>\n          Para cadastrar e usar todas as ferramentas, assine Pro ou Master.\n        </p>\n\n        <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(190px,1fr)); gap:14px; margin-bottom:28px; text-align:left;">\n\n          \x3c!-- FREE --\x3e\n          <div style="padding:18px; border-radius:12px; border:2px solid #e2e8f0; background:#f8fafc;">\n            <h3 style="margin:0 0 4px; color:#94a3b8; font-size:14px; font-weight:700;">FREE</h3>\n            <p style="font-size:26px; font-weight:800; margin:4px 0; color:#1e293b;">R$ 0<small style="font-size:11px; font-weight:400; color:#94a3b8;">/m√™s</small></p>\n            <ul style="margin:10px 0 0; padding-left:16px; color:#94a3b8; font-size:12px; line-height:1.9;">\n              <li>1 fazenda, 1 talh√£o</li>\n              <li>Apenas visualiza√ß√£o</li>\n              <li>Sem m√°quinas ou estoque</li>\n              <li>Sem aplica√ß√µes ou colheitas</li>\n              <li>Sem relat√≥rios ou IA</li>\n            </ul>\n            <div style="margin-top:14px; padding:7px; background:#e2e8f0; border-radius:6px; text-align:center; color:#94a3b8; font-size:11px; font-weight:700; letter-spacing:.5px;">PLANO ATUAL</div>\n          </div>\n\n          \x3c!-- PRO --\x3e\n          <div style="padding:18px; border-radius:12px; border:3px solid #10b981; background:#ecfdf5; position:relative;">\n            <div style="position:absolute; top:-12px; left:50%; transform:translateX(-50%); background:#10b981; color:white; padding:3px 14px; border-radius:12px; font-size:10px; font-weight:700; white-space:nowrap; letter-spacing:.5px;">‚≠ê MAIS POPULAR</div>\n            <h3 style="margin:0 0 4px; color:#065f46; font-size:14px; font-weight:700;">PRO</h3>\n            <p style="font-size:26px; font-weight:800; margin:4px 0; color:#1e293b;">R$ 199<small style="font-size:11px; font-weight:400; color:#047857;">/m√™s</small></p>\n            <ul style="margin:10px 0 0; padding-left:16px; color:#374151; font-size:12px; line-height:1.9;">\n              <li>5 fazendas, talh√µes ilimitados</li>\n              <li>M√°quinas e equipe (at√© 15)</li>\n              <li>Aplica√ß√µes, estoque, combust√≠vel</li>\n              <li>Colheitas, clima, manuten√ß√µes</li>\n              <li>Relat√≥rios completos</li>\n              <li>Agro-Copilot (em breve)</li>\n            </ul>\n            <a href="https://wa.me/5599991360547?text=Ol√°!%20Quero%20assinar%20o%20Agro%20Pro%20(Plano%20Pro%20R%24199%2Fm√™s)" target="_blank"\n               style="display:block; margin-top:14px; padding:10px; background:#10b981; color:white; border-radius:8px; font-weight:700; font-size:13px; text-decoration:none; text-align:center;">\n              üí¨ Assinar Pro ‚Äî R$199/m√™s\n            </a>\n          </div>\n\n          \x3c!-- MASTER --\x3e\n          <div style="padding:18px; border-radius:12px; border:2px solid #f59e0b; background:#fffbeb;">\n            <h3 style="margin:0 0 4px; color:#92400e; font-size:14px; font-weight:700;">MASTER</h3>\n            <p style="font-size:26px; font-weight:800; margin:4px 0; color:#1e293b;">R$ 299<small style="font-size:11px; font-weight:400; color:#b45309;">/m√™s</small></p>\n            <ul style="margin:10px 0 0; padding-left:16px; color:#374151; font-size:12px; line-height:1.9;">\n              <li>Fazendas <b>ilimitadas</b></li>\n              <li>Equipe e admins ilimitados</li>\n              <li>Tudo do Pro incluso</li>\n              <li>Suporte priorit√°rio 24h</li>\n              <li>Sem nenhum limite</li>\n              <li>Multiusu√°rios ilimitados</li>\n            </ul>\n            <a href="https://wa.me/5599991360547?text=Ol√°!%20Quero%20assinar%20o%20Agro%20Pro%20(Plano%20Master%20R%24299%2Fm√™s)" target="_blank"\n               style="display:block; margin-top:14px; padding:10px; background:#f59e0b; color:#1e293b; border-radius:8px; font-weight:700; font-size:13px; text-decoration:none; text-align:center;">\n              üí¨ Assinar Master ‚Äî R$299/m√™s\n            </a>\n          </div>\n        </div>\n\n        <div style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap;">\n          <a href="mailto:suporteagropro@gmail.com?subject=Assinatura Agro Pro" style="padding:11px 22px; background:#3b82f6; color:white; border-radius:8px; font-weight:600; font-size:13px; text-decoration:none;">üìß E-mail</a>\n          <button onclick="navigate('dashboard')" style="padding:11px 22px; background:#e2e8f0; color:#374151; border:none; border-radius:8px; font-size:13px; cursor:pointer; font-weight:600;">‚Üê Voltar</button>\n          <button onclick="localStorage.removeItem('agro_session'); localStorage.removeItem('agro_plano'); localStorage.removeItem('agro_role'); localStorage.removeItem('agro_trial'); location.reload();" style="padding:11px 22px; background:transparent; color:#94a3b8; border:1px solid #e2e8f0; border-radius:8px; font-size:12px; cursor:pointer;">Sair da conta</button>\n        </div>\n        <p style="margin-top:16px; font-size:11px; color:#94a3b8;">suporteagropro@gmail.com ¬∑ WhatsApp: (99) 99136-0547 ¬∑ Tiago Santos ‚Äî Fundador</p>\n      </div>\n    </div>\n  `;a?a.innerHTML=o:e.innerHTML=o}const Storage={key:"agro_pro_v10",MAX_SIZE_MB:4.5,load(){try{const e=localStorage.getItem(this.key);return e?JSON.parse(e):null}catch(e){return console.warn("[Storage] Erro ao carregar dados locais:",e.message),null}},save(e){try{const a=JSON.stringify(e),o=new Blob([a]).size/1048576;if(o>this.MAX_SIZE_MB&&(console.warn(`[Storage] Dados locais grandes: ${o.toFixed(2)}MB. Considere limpar safras antigas.`),e.clima&&e.clima.length>500)){const a=new Date;a.setDate(a.getDate()-365);const o=a.toISOString().substring(0,10);e.clima=e.clima.filter(e=>(e.data||"")>=o)}localStorage.setItem(this.key,JSON.stringify(e))}catch(a){if("QuotaExceededError"===a.name||22===a.code){if(console.error("[Storage] localStorage cheio! Limpando dados antigos de clima..."),e.clima){const a=new Date;a.setDate(a.getDate()-180),e.clima=e.clima.filter(e=>(e.data||"")>=a.toISOString().substring(0,10))}try{localStorage.setItem(this.key,JSON.stringify(e))}catch(e){}}}},getSizeMB(){try{const e=localStorage.getItem(this.key);return e?new Blob([e]).size/1048576:0}catch(e){return 0}}};function uid(e="id"){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const a=16*Math.random()|0;return("x"==e?a:3&a|8).toString(16)})}function nowISO(){const e=new Date,a=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())}`}async function _hashPassword(e){const a=(new TextEncoder).encode(e),o=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join("")}function escapeHtml(e){return String(e??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function sanitizeInput(e){return null==e?"":String(e).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/javascript\s*:/gi,"").trim()}function safeNumber(e,a=0){const o=Number(e);return Number.isFinite(o)?o:a}function toast(e,a,o){const i="number"==typeof o?o:3200,t=document.getElementById("toastHost")||(()=>{const e=document.createElement("div");return e.id="toastHost",e.className="toastHost",document.body.appendChild(e),e})(),n=document.createElement("div");n.className="toast",n.innerHTML=`<b>${escapeHtml(e)}</b><p>${escapeHtml(a)}</p>`,t.appendChild(n),setTimeout(()=>{n.classList.add("opacity-0","translate-y-6")},i),setTimeout(()=>{n.remove()},i+600)}function downloadText(e,a){const o=new Blob([a],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(o),t=document.createElement("a");t.href=i,t.download=e,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(i)}function toCSV(e){if(!e.length)return"";const a=Object.keys(e[0]),o=e=>`"${String(e??"").replaceAll('"','""')}"`;return[a.map(o).join(","),...e.map(e=>a.map(a=>o(e[a])).join(","))].join("\n")}function getPragasBase(){return[{id:"p1",nome:"Ferrugem Asi√°tica",nomeCientifico:"Phakopsora pachyrhizi",culturas:["soja"],tempMin:20,tempMax:28,umidadeMin:70},{id:"p2",nome:"Lagarta-da-soja",nomeCientifico:"Anticarsia gemmatalis",culturas:["soja"],tempMin:22,tempMax:30,umidadeMin:60},{id:"p3",nome:"Percevejo-marrom",nomeCientifico:"Euschistus heros",culturas:["soja"],tempMin:20,tempMax:32,umidadeMin:50},{id:"p4",nome:"Lagarta-do-cartucho",nomeCientifico:"Spodoptera frugiperda",culturas:["milho"],tempMin:22,tempMax:30,umidadeMin:60},{id:"p5",nome:"Cigarrinha-do-milho",nomeCientifico:"Dalbulus maidis",culturas:["milho"],tempMin:24,tempMax:32,umidadeMin:55},{id:"p6",nome:"Helicoverpa",nomeCientifico:"Helicoverpa armigera",culturas:["soja","milho","algodao"],tempMin:22,tempMax:30,umidadeMin:60},{id:"p7",nome:"Bicudo-do-algodoeiro",nomeCientifico:"Anthonomus grandis",culturas:["algodao"],tempMin:22,tempMax:32,umidadeMin:60},{id:"p8",nome:"√Åcaro-rajado",nomeCientifico:"Tetranychus urticae",culturas:["algodao","soja"],tempMin:25,tempMax:35,umidadeMin:40},{id:"p9",nome:"Antracnose",nomeCientifico:"Colletotrichum truncatum",culturas:["soja"],tempMin:22,tempMax:28,umidadeMin:80},{id:"p10",nome:"Cercosporiose",nomeCientifico:"Cercospora kikuchii",culturas:["soja"],tempMin:22,tempMax:28,umidadeMin:75},{id:"p11",nome:"Mancha-alvo",nomeCientifico:"Corynespora cassiicola",culturas:["soja"],tempMin:24,tempMax:30,umidadeMin:70},{id:"p12",nome:"Mofo-branco",nomeCientifico:"Sclerotinia sclerotiorum",culturas:["soja"],tempMin:18,tempMax:24,umidadeMin:85},{id:"p13",nome:"O√≠dio",nomeCientifico:"Erysiphe diffusa",culturas:["soja"],tempMin:20,tempMax:26,umidadeMin:50},{id:"p14",nome:"Ferrugem-branca",nomeCientifico:"Puccinia polysora",culturas:["milho"],tempMin:20,tempMax:26,umidadeMin:80},{id:"p15",nome:"Pulg√£o-do-algodoeiro",nomeCientifico:"Aphis gossypii",culturas:["algodao"],tempMin:20,tempMax:28,umidadeMin:60},{id:"p16",nome:"Mosca-branca",nomeCientifico:"Bemisia tabaci",culturas:["soja","algodao"],tempMin:25,tempMax:35,umidadeMin:50},{id:"p17",nome:"Tripes",nomeCientifico:"Frankliniella schultzei",culturas:["soja","algodao"],tempMin:22,tempMax:30,umidadeMin:50},{id:"p18",nome:"Broca-da-cana",nomeCientifico:"Diatraea saccharalis",culturas:["milho"],tempMin:22,tempMax:28,umidadeMin:70},{id:"p19",nome:"Lagarta-elasmo",nomeCientifico:"Elasmopalpus lignosellus",culturas:["milho"],tempMin:22,tempMax:30,umidadeMin:50},{id:"p20",nome:"Mancha-de-ramularia",nomeCientifico:"Ramularia areola",culturas:["algodao"],tempMin:22,tempMax:28,umidadeMin:80}]}function getProdutosBase(){return[]}function seedDB(){const e={meta:{createdAt:(new Date).toISOString(),version:10},session:{safraId:null,fazendaId:null},safras:[],fazendas:[],talhoes:[],produtos:[],estoque:[],equipe:[],maquinas:[],clima:[],dieselEntradas:[],dieselEstoque:[],combustivel:[],aplicacoes:[],colheitas:[],lembretes:[],pragas:[],manutencoes:[],insumosBase:[],parametros:{precoSoja:120,produtividadeMinSoja:65,produtividadeMaxSoja:75,precoMilho:60,produtividadeMinMilho:100,produtividadeMaxMilho:130,precoSorgo:42,produtividadeMinSorgo:70,produtividadeMaxSorgo:100,precoFeijao:280,produtividadeMinFeijao:25,produtividadeMaxFeijao:40,precoTrigo:85,produtividadeMinTrigo:40,produtividadeMaxTrigo:60,precoArroz:60,produtividadeMinArroz:60,produtividadeMaxArroz:80,precoCafe:1200,produtividadeMinCafe:20,produtividadeMaxCafe:40,pesoPadraoSaca:60}};return Storage.save(e),e}function getDB(){let e=Storage.load();if(e||(e=seedDB()),e.meta=e.meta||{createdAt:(new Date).toISOString(),version:9},e.session=e.session||{},e.safras=e.safras||[],e.parametros=e.parametros||{precoSoja:120,produtividadeMinSoja:65,produtividadeMaxSoja:75,precoMilho:60,produtividadeMinMilho:100,produtividadeMaxMilho:130,precoSorgo:42,produtividadeMinSorgo:70,produtividadeMaxSorgo:100,precoFeijao:280,produtividadeMinFeijao:25,produtividadeMaxFeijao:40,precoTrigo:85,produtividadeMinTrigo:40,produtividadeMaxTrigo:60,precoArroz:60,produtividadeMinArroz:60,produtividadeMaxArroz:80,precoCafe:1200,produtividadeMinCafe:20,produtividadeMaxCafe:40,pesoPadraoSaca:60},e.fazendas=e.fazendas||[],e.talhoes=e.talhoes||[],e.produtos=e.produtos||[],e.estoque=e.estoque||[],e.equipe=e.equipe||[],e.maquinas=e.maquinas||[],e.clima=e.clima||[],e.dieselEntradas=e.dieselEntradas||[],e.session.safraId&&0===e.safras.length){const a=(new Date).getFullYear();e.safras.push({id:e.session.safraId,nome:`Safra ${a}/${String(a+1).slice(2)}`,dataInicio:nowISO(),dataFim:"",ativa:!0,observacoes:"(criada automaticamente - sincronize para restaurar dados)"})}return e.dieselEstoque=e.dieselEstoque||[{id:uid("dsl"),safraId:e.session.safraId||e.safras?.[0]?.id||uid("saf"),deposito:"Tanque Principal",litros:0,precoVigente:0,obs:""}],e.combustivel=e.combustivel||[],e.aplicacoes=e.aplicacoes||[],e.colheitas=e.colheitas||[],e.lembretes=e.lembretes||[],e.pragas=e.pragas||[],e.manutencoes=e.manutencoes||[],e.insumosBase=e.insumosBase||[],e.folhaSalarial=e.folhaSalarial||[],e.analiseSolo=e.analiseSolo||[],e.clima.forEach(e=>{null==e.talhaoId&&(e.talhaoId="")}),Storage.save(e),e}function setDB(e){e.meta=e.meta||{},e.meta.lastSync=(new Date).toISOString(),Storage.save(e),"function"==typeof window.cloudSync&&window.cloudSync()}function getSafraId(){const e=getDB();return e.session?.safraId||(e.safras[0]?.id??null)}function setSafraId(e){const a=getDB();a.session=a.session||{},a.session.safraId=e,setDB(a)}function getSafraAtual(){const e=getDB(),a=getSafraId();return e.safras?.find(e=>e.id===a)}const PAGES=[{href:"index.html",label:"Dashboard",key:"dashboard",icon:"üìä"},{href:"copilot.html",label:"Agro-Copilot (IA)",key:"copilot",icon:"ü§ñ",badge:"EM BREVE"},{href:"centralgestao.html",label:"Central de Gest√£o",key:"centralgestao",icon:"üõ∞Ô∏è"},{href:"propriedade.html",label:"Minha Propriedade",key:"propriedade",icon:"üè°"},{href:"insumos.html",label:"Produtos & Estoque",key:"insumos",icon:"üß™"},{href:"insumosbase.html",label:"Insumos Base",key:"insumosbase",icon:"üå±"},{href:"aplicacoes.html",label:"Aplica√ß√µes",key:"aplicacoes",icon:"üöú"},{href:"combustivel.html",label:"Combust√≠vel",key:"combustivel",icon:"‚õΩ"},{href:"clima.html",label:"Clima/Chuva",key:"clima",icon:"üåßÔ∏è"},{href:"colheitas.html",label:"Colheitas",key:"colheitas",icon:"üåæ"},{href:"manutencao.html",label:"Manuten√ß√£o",key:"manutencao",icon:"üîß"},{href:"equipe.html",label:"Equipe",key:"equipe",icon:"üë∑"},{href:"folhasalarial.html",label:"Folha Salarial",key:"folhasalarial",icon:"üí∞"},{href:"analisesolo.html",label:"An√°lise de Solo",key:"analisesolo",icon:"üî¨"},{href:"maquinas.html",label:"M√°quinas",key:"maquinas",icon:"üõ†Ô∏è"},{href:"relatorios.html",label:"Relat√≥rios",key:"relatorios",icon:"üßæ"},{href:"configuracoes.html",label:"Configura√ß√µes",key:"config",icon:"‚öôÔ∏è"},{href:"ajuda.html",label:"Ajuda & Suporte",key:"ajuda",icon:"‚ùì"}];function _renderIAComingSoon(e,a,o){const i=o.map(e=>`\n    <div style="background:var(--bg-card, #f8fafc); border-radius:12px; padding:20px; text-align:center; border:1px solid var(--border, #e2e8f0);">\n      <div style="font-size:36px; margin-bottom:10px;">${e.icon}</div>\n      <h4 style="margin:0 0 6px; font-size:14px; font-weight:700;">${escapeHtml(e.title)}</h4>\n      <p style="margin:0; font-size:12px; color:var(--text-muted, #64748b); line-height:1.4;">${escapeHtml(e.desc)}</p>\n    </div>\n  `).join("");return`\n    <div style="max-width:700px; margin:0 auto;">\n      <div class="card" style="text-align:center; padding:40px 30px; background:linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #2d6a4f 100%); color:white; border:none; border-radius:16px; position:relative; overflow:hidden;">\n        <div style="position:absolute; top:-40px; right:-40px; width:120px; height:120px; background:rgba(255,255,255,0.05); border-radius:50%;"></div>\n        <div style="position:absolute; bottom:-30px; left:-30px; width:80px; height:80px; background:rgba(255,255,255,0.03); border-radius:50%;"></div>\n\n        <div style="display:inline-flex; align-items:center; gap:8px; background:rgba(251,191,36,0.2); padding:6px 16px; border-radius:20px; font-size:12px; font-weight:700; color:#fbbf24; margin-bottom:20px; letter-spacing:1px;">\n          <span style="display:inline-block; width:8px; height:8px; background:#fbbf24; border-radius:50%; animation:pulse 2s infinite;"></span>\n          EM DESENVOLVIMENTO\n        </div>\n\n        <h2 style="margin:0 0 12px; font-size:28px; font-weight:800;">${escapeHtml(e)}</h2>\n        <p style="margin:0 auto 24px; max-width:500px; opacity:0.85; line-height:1.6; font-size:15px;">${escapeHtml(a)}</p>\n\n        <div style="display:inline-flex; align-items:center; gap:10px; background:rgba(255,255,255,0.1); padding:10px 20px; border-radius:10px; font-size:13px;">\n          <span style="font-size:20px;">üöÄ</span>\n          <span>Previs√£o de lan√ßamento: <b>em breve</b></span>\n        </div>\n      </div>\n\n      <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:12px; margin-top:16px;">\n        ${i}\n      </div>\n\n      <div class="card" style="margin-top:16px; text-align:center; padding:24px; border:2px dashed var(--primary, #2d6a4f); background:var(--bg-card, #f0fdf4);">\n        <h3 style="margin:0 0 8px; font-size:16px; color:var(--primary, #2d6a4f);">Quer ser avisado quando lan√ßar?</h3>\n        <p style="margin:0 0 16px; font-size:13px; color:var(--text-muted, #64748b);">Assine o plano Pro e seja o primeiro a ter acesso quando a IA for ativada.</p>\n        <a href="https://wa.me/5599991360547?text=Ol%C3%A1!%20Quero%20saber%20quando%20a%20IA%20do%20Agro%20Pro%20ser%C3%A1%20lan%C3%A7ada!"\n           target="_blank"\n           style="display:inline-block; background:#25d366; color:white; padding:12px 28px; border-radius:10px; font-weight:700; text-decoration:none; font-size:14px; transition:transform 0.2s;"\n           onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">\n          üí¨ Quero ser avisado pelo WhatsApp\n        </a>\n      </div>\n    </div>\n    <style>\n      @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.3; } }\n    </style>\n  `}function emptyState(e,a,o,i=""){return`\n    <div class="empty-state">\n      <div class="empty-icon">${e}</div>\n      <h3>${escapeHtml(a)}</h3>\n      <p>${escapeHtml(o)}</p>\n      ${i}\n    </div>\n  `}function kpiValue(e,a="",o="Nenhum registro"){const i=Number(e||0);return 0===i?`<span class="text-muted" style="font-size:14px; font-weight:500;">${o}</span>`:`${num(i)}${a?` <span style="font-size:13px;font-weight:400;">${a}</span>`:""}`}!function(){const e=localStorage.getItem("agro_theme")||"light";document.documentElement.setAttribute("data-theme",e)}();